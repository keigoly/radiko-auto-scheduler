<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <style>
    /* ▼▼▼ ベーススタイル ▼▼▼ */
    body {
      width: 350px;
      font-family: sans-serif;
      padding: 15px;
      color: #333;
      background-color: #fff;
      transition: background-color 0.3s, color 0.3s;
    }

    /* ▼▼▼ ダークモード定義 ▼▼▼ */
    body.dark-mode {
      background-color: #202124;
      color: #e8eaed;
    }
    body.dark-mode .input-group,
    body.dark-mode li,
    body.dark-mode .settings-header,
    body.dark-mode .settings-content {
      background-color: #303134;
      border-color: #5f6368;
      color: #e8eaed;
    }
    body.dark-mode select,
    body.dark-mode input {
      background-color: #202124;
      color: #e8eaed;
      border-color: #5f6368;
    }
    body.dark-mode .header-row,
    body.dark-mode .settings-nav,
    body.dark-mode li {
      border-color: #5f6368;
    }
    body.dark-mode .settings-btn {
      color: #9aa0a6;
    }
    body.dark-mode .settings-btn:hover {
      background-color: #3c4043;
      color: #8ab4f8;
    }

    /* ▼▼▼ 画面切り替え用 ▼▼▼ */
    .view-container {
      display: block;
      animation: fadeIn 0.2s ease-in-out;
    }
    .hidden {
      display: none !important;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(5px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* ▼▼▼ メイン画面（既存スタイル） ▼▼▼ */
    .header-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 2px solid #007bff;
      margin-bottom: 15px;
      padding-bottom: 5px;
    }
    h2 { font-size: 16px; margin: 0; }
    
    .settings-btn {
      width: 28px; height: 28px;
      background: none; border: none; cursor: pointer; padding: 0;
      display: flex; align-items: center; justify-content: center;
      border-radius: 50%; color: #999; transition: all 0.2s;
    }
    .settings-btn:hover { background-color: #f0f0f0; color: #007bff; }

    .input-group { background: #f9f9f9; padding: 10px; border-radius: 8px; margin-bottom: 15px; transition: background 0.3s; }
    label { font-size: 12px; font-weight: bold; display: block; margin-bottom: 2px; }
    select, input, button { width: 100%; margin-bottom: 10px; padding: 8px; box-sizing: border-box; border: 1px solid #ccc; border-radius: 4px; }
    .btn-row { display: flex; gap: 5px; }
    button { font-weight: bold; border: none; cursor: pointer; margin-bottom: 0; }
    #addBtn { background-color: #007bff; color: white; }
    #addBtn:hover { background-color: #0056b3; }
    #cancelBtn { background-color: #6c757d; color: white; display: none; }
    
    ul { list-style: none; padding: 0; margin: 0; }
    li { background: #fff; border-bottom: 1px solid #eee; padding: 10px 0; display: flex; justify-content: space-between; align-items: center; transition: background 0.3s; }
    .schedule-info { font-size: 13px; line-height: 1.4; flex-grow: 1;}
    .schedule-time { font-weight: bold; color: #007bff; margin-right: 5px; }
    .schedule-station { font-size: 12px; color: #555; display: block;}
    body.dark-mode .schedule-station { color: #9aa0a6; }
    
    .action-btns { display: flex; gap: 5px; flex-shrink: 0; }
    .edit-btn { background-color: #28a745; color: white; padding: 4px 8px; font-size: 12px; width: auto; }
    .delete-btn { background-color: #dc3545; color: white; padding: 4px 8px; font-size: 12px; width: auto; }
    .empty-msg { text-align: center; color: #888; font-size: 12px; margin-top: 20px; }

    /* ▼▼▼ 設定画面（スタイル修正） ▼▼▼ */
    .settings-nav {
      display: flex; 
      align-items: center; 
      gap: 5px; /* ボタンとタイトルの間隔 */
      margin-bottom: 15px; 
      padding-bottom: 10px;
      border-bottom: 1px solid #ddd;
    }
    .settings-nav h2 {
      font-size: 16px;
      margin: 0;
      white-space: nowrap;
      margin-left: 5px; /* 少し余白を追加 */
    }

    /* ▼修正: 戻るボタンのスタイルを厳密に定義 */
    .back-btn {
      width: 32px;  /* サイズ固定 */
      height: 32px; /* サイズ固定 */
      background: none; 
      border: none; 
      cursor: pointer; 
      padding: 0; /* 余計なパディングを削除 */
      
      /* アイコンを中央に配置 */
      display: flex; 
      align-items: center; 
      justify-content: center;
      
      border-radius: 50%; /* 正円 */
      color: #666; 
      transition: all 0.2s;
    }
    
    /* ホバー時に青く光る設定 */
    .back-btn:hover { 
      background-color: #f0f0f0;
      color: #007bff; /* 青色 */
    }

    /* ダークモード時の戻るボタン */
    body.dark-mode .back-btn { color: #e8eaed; }
    body.dark-mode .back-btn:hover { 
      background-color: #3c4043;
      color: #8ab4f8; /* ダークモードでの青 */
    }

    /* アコーディオンリスト */
    .settings-list {
      display: flex; flex-direction: column; gap: 10px;
    }
    .accordion-item {
      border-radius: 8px; overflow: hidden;
    }
    .settings-header {
      background: #f1f3f4; padding: 12px 15px;
      cursor: pointer; display: flex; justify-content: space-between; align-items: center;
      font-weight: bold; font-size: 13px; user-select: none;
      transition: background 0.2s;
    }
    .settings-header:hover { opacity: 0.8; }
    .arrow { transition: transform 0.3s; font-size: 10px; }
    .accordion-item.active .arrow { transform: rotate(180deg); }

    .settings-content {
      background: #fff; max-height: 0; overflow: hidden;
      transition: max-height 0.3s ease-out, padding 0.3s ease;
      padding: 0 15px;
    }
    /* ▼▼▼ 修正後 ▼▼▼ */
    .accordion-item.active .settings-content {
      max-height: 500px; /* 内容が十分入るように大きくする */
      padding: 15px; border-top: 1px solid #ddd;
    }

    /* トグルスイッチ */
    .toggle-row {
      display: flex; justify-content: space-between; align-items: center;
    }
    .switch {
      position: relative; display: inline-block; width: 40px; height: 20px;
    }
    .switch input { opacity: 0; width: 0; height: 0; }
    .slider {
      position: absolute; cursor: pointer;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: #ccc; transition: .4s; border-radius: 20px;
    }
    .slider:before {
      position: absolute; content: "";
      height: 16px; width: 16px; left: 2px; bottom: 2px;
      background-color: white; transition: .4s; border-radius: 50%;
    }
    input:checked + .slider { background-color: #007bff; }
    input:checked + .slider:before { transform: translateX(20px); }

    /* ▼▼▼ 追加: 問い合わせリストのスタイル ▼▼▼ */
    .support-link {
      display: flex;
      align-items: center;
      text-decoration: none;
      color: inherit;
      padding: 12px 0;
      border-bottom: 1px solid #eee;
      transition: background-color 0.2s;
    }
    .support-link:last-child {
      border-bottom: none;
    }
    .support-link:hover {
      background-color: #f9f9f9;
    }

    /* ダークモード対応 */
    body.dark-mode .support-link {
      border-color: #5f6368;
    }
    body.dark-mode .support-link:hover {
      background-color: #3c4043;
    }

    .link-icon {
      margin-right: 12px;
      color: #5f6368;
      display: flex;
      align-items: center;
    }
    body.dark-mode .link-icon {
      color: #9aa0a6;
    }

    .link-text {
      flex: 1;
    }
    .link-title {
      display: block;
      font-weight: bold;
      font-size: 13px;
      margin-bottom: 3px;
    }
    .link-desc {
      display: block;
      font-size: 10px; /* 少し小さくして補足感を出す */
      color: #666;
    }
    body.dark-mode .link-desc {
      color: #9aa0a6;
    }

    .external-icon {
      color: #ccc;
      margin-left: 10px;
    }
    body.dark-mode .external-icon {
      color: #5f6368;
    }
  </style>
</head>
<body>

  <div id="mainView" class="view-container">
    <div class="header-row">
      <h2>予約スケジュール登録</h2>
      <button id="toSettingsBtn" class="settings-btn" title="設定">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
      </button>
    </div>

    <div class="input-group">
      <label>曜日と時間</label>
      <div style="display: flex; gap: 5px;">
        <select id="daySelect" style="flex: 1;">
          <option value="1">月曜日</option>
          <option value="2">火曜日</option>
          <option value="3">水曜日</option>
          <option value="4">木曜日</option>
          <option value="5">金曜日</option>
          <option value="6">土曜日</option>
          <option value="0">日曜日</option>
        </select>
        <input type="time" id="timeInput" required style="flex: 1;">
      </div>
      <label>エリア選択</label>
      <select id="regionSelect"><option value="">地域を選択...</option></select>
      <label>都道府県</label>
      <select id="prefectureSelect" disabled><option value="">都道府県を選択...</option></select>
      <label>放送局</label>
      <select id="stationSelect" disabled><option value="">放送局を選択...</option></select>
      <div class="btn-row">
        <button id="cancelBtn">キャンセル</button>
        <button id="addBtn">スケジュールに追加</button>
      </div>
    </div>

    <h3>登録済みリスト</h3>
    <ul id="scheduleList"></ul>
    <div id="emptyMsg" class="empty-msg">まだ登録がありません</div>
  </div>

  <div id="settingsView" class="view-container hidden">
    <div class="settings-nav">
      <button id="backToMainBtn" class="back-btn" title="戻る">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
      </button>
      <h2>設定</h2>
    </div>

    <div class="settings-list">
      <div class="accordion-item" id="darkModeAccordion">
        <div class="settings-header">
          <span>ダークモード</span>
          <span class="arrow">▼</span>
        </div>
        <div class="settings-content">
          <div class="toggle-row">
            <span style="font-size:12px;">ダークモードを有効にする</span>
            <label class="switch">
              <input type="checkbox" id="darkModeToggle">
              <span class="slider"></span>
            </label>
          </div>
        </div>
      </div>
      
      <div class="accordion-item">
        <div class="settings-header">
          <span>その他・問い合わせ</span>
          <span class="arrow">▼</span>
        </div>
        <div class="settings-content" style="padding: 0 15px;">
          
          <a href="https://docs.google.com/forms/d/e/1FAIpQLSfiUcmAq5IbTTo1EXUKH-GCS_ZMhKoSdkCTAjEzACibdLwtMQ/viewform?usp=publish-editor" target="_blank" class="support-link">
            <div class="link-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
            </div>
            <div class="link-text">
              <span class="link-title">不具合の報告</span>
              <span class="link-desc">バグ報告や機能要望はこちら</span>
            </div>
            <div class="external-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
            </div>
          </a>

          <a href="https://github.com/keigoly/radiko-auto-scheduler/blob/main/PRIVACY.md" target="_blank" class="support-link">
            <div class="link-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
            </div>
            <div class="link-text">
              <span class="link-title">プライバシーポリシー</span>
              <span class="link-desc">個人情報の取り扱いについて</span>
            </div>
            <div class="external-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
            </div>
          </a>

          <a href="https://github.com/keigoly/radiko-auto-scheduler" target="_blank" class="support-link">
            <div class="link-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>
            </div>
            <div class="link-text">
              <span class="link-title">ソースコード</span>
              <span class="link-desc">GitHubでコードを見る</span>
            </div>
            <div class="external-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
            </div>
          </a>

          <a href="https://www.amazon.jp/hz/wishlist/ls/EB28J89CZWVI?ref_=wl_share" target="_blank" class="support-link">
            <div class="link-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 12 20 22 4 22 4 12"></polyline><rect x="2" y="7" width="20" height="5"></rect><line x1="12" y1="22" x2="12" y2="7"></line><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 5 12 7 12 7z"></path><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 5 12 7 12 7z"></path></svg>
            </div>
            <div class="link-text">
              <span class="link-title">開発者を支援する</span>
              <span class="link-desc">Amazon 欲しいものリスト</span>
            </div>
            <div class="external-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
            </div>
          </a>
          
        </div>
      </div>
  </div>

  <script src="stations.js"></script>
  <script src="popup.js"></script>
</body>
</html>